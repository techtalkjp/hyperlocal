generator kysely {
  provider  = "prisma-kysely"
  output    = "../app/services/db"
  fileName  = "types.ts"
  camelCase = "true"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model Area {
  id              String            @id
  name            String
  longitude       Float
  latitude        Float
  createdAt       DateTime          @default(now()) @map("created_at")
  updatedAt       DateTime          @default(now()) @map("updated_at")
  googlePlaceArea GooglePlaceArea[]

  @@map("areas")
}

model GooglePlace {
  id              String   @id
  name            String
  types           String
  rating          Float
  userRatingCount Float    @map("user_rating_count")
  latitude        Float
  longitude       Float
  displayName     String   @map("display_name")
  raw             String
  createdAt       DateTime @default(now()) @map("created_at")
  updatedAt       DateTime @default(now()) @map("updated_at")

  googlePlacesArea GooglePlaceArea[]

  @@map("google_places")
}

model GooglePlaceArea {
  googlePlaceId String      @map("google_place_id")
  areaId        String      @map("area_id")
  categoryId    String      @map("category_id")
  createdAt     DateTime    @default(now()) @map("created_at")
  updatedAt     DateTime    @default(now()) @map("updated_at")
  areas         Area        @relation(fields: [areaId], references: [id], onDelete: NoAction, onUpdate: NoAction)
  googlePlaces  GooglePlace @relation(fields: [googlePlaceId], references: [id], onDelete: NoAction, onUpdate: NoAction)

  @@unique([googlePlaceId, areaId, categoryId], map: "google_place_area_category_unique")
  @@map("google_places_areas")
}
