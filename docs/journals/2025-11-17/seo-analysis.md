# Google検索に表示されない原因の調査と対策

## エグゼクティブサマリー

Hyperlocal Tokyoは1年以上公開しているにもかかわらず、Google検索で見つからない状態です。実は2024年11月頃まではGoogleの検索結果に表示されており、クリックと表示回数が発生していました。しかし年末にAIクローラー対策でrobots.txtを更新した際、誤ってすべてのクローラーをブロックしてしまい、Googleのインデックスから削除されました。その後robots.txtを修正し、Google Search Consoleで修正リクエストを送信しましたが、現在もインデックスに復帰していません。

Googleはサイトをクロールしているものの、インデックスに登録していない状況です。調査の結果、この状況を悪化させている3つの致命的な技術的問題が見つかりました。

最も重大なのは、サイトの構造化データ内のURLがすべて本番環境でも localhost を指している点です。以前のrobots.txtブロック事故の履歴に加え、このような基本的な設定ミスがあると、Googleはサイトの信頼性と品質を深刻に疑います。次に、トップページや地域ページに説明文が実質的に存在しないため、Googleはページの内容と価値を理解できません。さらに、個別の店舗ページには店舗情報を示す構造化データがまったくありません。

ただし、状況は絶望的ではありません。サイトの基礎技術は正しく実装されており、サーバーサイドレンダリング、多言語対応、サイトマップなどは問題なく機能しています。今回発見された問題は比較的短期間で修正可能です。特にlocalhost URLの修正は1行のコード変更で完了します。これらの技術的問題を修正することで、Googleがサイトを再評価し、インデックスに復帰させる可能性が高まります。

優先的に対応すべき3つのアクションは、構造化データのlocalhost問題の即座の修正、全ページへの適切な説明文の追加、店舗ページへの構造化データの実装です。これらを完了した後、Google Search Consoleで再度インデックス登録をリクエストすることを推奨します。

## 背景

Hyperlocal Tokyoは東京のレストラン検索サービスとして1年以上前から公開されています。サイトは英語、日本語、簡体字中国語、繁体字中国語、韓国語の5言語に対応し、東京の20エリア、6つの店舗カテゴリーで約600ページを提供しています。

2024年11月頃まで、サイトはGoogle検索結果に正常に表示されていました。Search Consoleのデータによると、合計クリック数3、表示回数73という少ないながらも一定のトラフィックがありました。しかし年末、AIクローラーによる過負荷対策でrobots.txtを更新した際、設定ミスによりすべてのクローラーをブロックしてしまいました。この結果、Googleのインデックスからサイトがすべて削除されました。

問題発覚後、robots.txtを修正し、Google Search Consoleで修正リクエストを送信しました。現在Googleはサイトをクロールしていることが確認できていますが、インデックスには復帰していません。クロール自体は行われているにもかかわらず、検索結果に表示されないという状況が続いています。

この調査では、なぜGoogleがクロールしているサイトをインデックスに登録しないのか、技術的な実装を確認し、インデックス復帰を妨げている原因を特定します。

## サイトの現状分析

### 正しく実装されている要素

サイトにはいくつか適切に実装されているSEO要素があります。

サーバーサイドレンダリングが正しく機能しており、GoogleはJavaScriptを実行しなくても完全なHTMLを受け取れます。これは検索エンジン最適化の基礎として重要です。

カノニカルURLがすべてのページで正しく設定されており、tokyo.hyper-local.app ドメインを指しています。これにより重複コンテンツの問題を回避できます。

多言語対応のhreflangタグが技術的に正しく実装されています。5つの言語すべてに対する代替言語タグと、デフォルト言語の設定が適切に行われています。

カテゴリー一覧ページには適切な説明文が実装されています。generateAreaCategoryMetaDescription関数を通じて、各言語に対応した説明文が生成されています。

サイトマップの構造は整理されており、各言語ごとに分離されたXMLファイルが適切にインデックスから参照されています。

### 発見された重大な問題

調査の結果、検索結果に表示されない原因と考えられる重大な問題がいくつか見つかりました。

トップページと地域ページに説明文が実質的に存在しません。root.tsxファイルには説明文のメタタグがありますが、内容は「Hyperlocal」という単語だけで、検索エンジンに何の情報も提供していません。/area/marumouchiのような地域ページには説明文のメタタグ自体が存在しません。

JSON-LD形式の構造化データに根本的なバグがあります。スキーマ内のURLフィールドが本番環境でもlocalhostを指しています。日本語のカフェページを確認すると「url: http://localhost/ja/area/marunouchi/cafe/rating」となっており、正しいtokyo.hyper-local.appドメインではありません。これはコードがrequest.urlを使ってURLを構築しているため、本番環境で誤った解決が行われていることが原因です。

店舗詳細ページのSEO最適化が不十分です。タイトルはありますが説明文がなく、レストランや店舗を示す構造化データもなく、SNSシェア用のOpen Graphタグもありません。個別の店舗ページは検索トラフィックの重要な入り口になるはずですが、この機会が失われています。

サイト全体にOpen GraphとTwitter Cardのメタデータがありません。これはSNSでシェアされた際の表示が最適化されていないことを意味し、直接的なトラフィックとSNSからの評価シグナルの両方に影響します。

## Google Search Consoleのデータ分析

カバレッジレポートのデータからGoogleとサイトの関係性が見えてきます。

Google Search Consoleのカバレッジレポートには7つのURLしか表示されていません。そのうち5つは2025年11月12日に最近クロールされていますが、2つは4月24日と4月26日が最終クロール日となっており、不規則なクロールパターンを示唆しています。サイトマップには600URLが含まれているのに対し、カバレッジレポートのURL数が極端に少ないのは懸念材料です。

Googleがクロールを選択したURLには、トップページ、中国語版トップページ、丸の内エリアページのトレイリングスラッシュありとなしの両方のバリエーションが含まれています。両方のバリエーションが存在することは重複コンテンツの問題を示唆していますが、カノニカルタグがこれを解決するはずです。

## 技術的詳細：URL構築バグの分析

構造化データのバグは根本的な技術的失敗を示しているため、特別な注意を払う必要があります。カテゴリー一覧のルートハンドラーでは、meta関数が次のようにJSON-LDを構築しています。

```typescript
'script:ld+json': {
  '@context': 'http://schema.org',
  '@type': 'LocalBusiness',
  name: `${data.city.i18n[data.lang.id]} ${data.area.i18n[data.lang.id]} ${data.category.i18n[data.lang.id]}`,
  description: generateAreaCategoryMetaDescription(...),
  url: new URL(
    `${data.lang.path}area/${data.area.areaId}/${data.category.id}/${data.rankingType}`,
    data.url,
  ).toString(),
}
```

問題は、data.urlがローダーのrequest.urlから来ており、これをURLコンストラクタのベースパラメータとして使用すると、本番環境でlocalhostに解決されてしまうことです。これはデプロイ設定、プロキシヘッダー、CloudflareとFly.ioを経由するリクエスト転送の問題である可能性があります。

## Googleがインデックスに復帰させない理由

Googleがサイトをクロールしているにもかかわらずインデックスに登録しない理由として、過去のrobots.txtブロック事故と現在の技術的問題の組み合わせが考えられます。

最も重大な要因は、構造化データ内のlocalhost URLです。Googleの視点から見ると、以前robots.txtで全ブロックしたサイトが、今度はスキーマ内のURLにlocalhostを記載しています。これは単なる技術的ミスを超えて、サイト全体の信頼性と管理品質を疑わせる強いシグナルとなります。Googleは品質の低いサイトや管理が不適切なサイトをインデックスから除外する傾向があり、この組み合わせは極めて悪い印象を与えます。

重要なランディングページに意味のある説明文がないことも、Googleの判断を難しくしています。トップページと地域ページには実質的に説明文がないため、Googleはこれらのページが何を提供しているのか、どのような検索クエリに対して価値があるのか判断できません。インデックスに登録する価値があるかどうかの判断材料が不足しています。

レストランレベルの構造化データがないため、Googleはサイトが説明している実際のコンテンツとエンティティを理解できません。ローカルビジネスディレクトリにとって、スキーママークアップはナレッジパネルやマップ統合などのローカル検索機能に不可欠です。この欠如は、サイトの目的とコンテンツの価値をGoogleが評価できないことを意味します。

エリアインデックスページのコンテンツが限定的で、Googleがインデックス化する価値を見出しにくい状態です。これらのページはエリア名とカテゴリーリンクだけを表示し、実質的なテキスト、説明、独自の価値提案がありません。Googleはこれらを薄いコンテンツと見なし、インデックスに値しないと判断している可能性があります。

多言語実装はhreflangで技術的には正しいものの、主要言語ターゲットが不明確なため、Googleはどの言語バージョンを優先してインデックスすべきか判断に苦しんでいる可能性があります。

robots.txtブロック事故による過去のマイナス評価が残っている可能性もあります。Googleは一度インデックスから削除したサイトを再評価する際、より慎重になります。現在発見された技術的問題は、この慎重な再評価プロセスでマイナスに働いている可能性が高いです。

## 推奨対応

検索での表示を改善するために、以下のアクションを優先すべきです。

第一に、JSON-LD構造化データのlocalhostバグを即座に修正します。URLはrequest.urlに依存するのではなく、CANONICAL_BASE_URL定数を使用して構築すべきです。これは緊急にデプロイすべき重要な修正です。

第二に、すべてのページに包括的な説明文を追加します。トップページにはHyperlocal Tokyoが提供するものを説明する120-160文字の説明が必要です。エリアページには、その地域と利用可能な店舗タイプを強調する説明が必要です。現在のエリアページにはコンテンツ内に説明がありますが、メタタグにはありません。これは逃している機会です。

第三に、店舗詳細ページにレストランレベルの構造化データを実装します。各店舗には、名前、住所、座標、営業時間、価格帯、料理タイプ、評価、写真を含む適切なRestaurantまたはLocalBusinessスキーマが必要です。この構造化データはローカル検索での表示に不可欠です。

第四に、すべてのページにOpen GraphとTwitter Cardのメタデータを追加します。すべてのページにog:title、og:description、og:image、og:type、og:urlを含めます。レストランページでは、店舗の写真をog:imageとして使用します。これによりソーシャルシェアが改善され、検索エンジンへの肯定的なシグナルとなる可能性があります。

第五に、エリアインデックスページのコンテンツの深さを強化します。各エリアの特徴、飲食シーン、ユニークな点を説明する段落を追加します。ユーザーに真の価値を提供しながら、関連するキーワードを自然に含めます。「[エリア]のベストプレイス」セクションを追加してトップ店舗を強調することを検討します。

第六に、トレイリングスラッシュの不整合を解決します。サイトはトレイリングスラッシュを一貫して使用するか使用しないかを決め、カノニカルタグとリダイレクトが両方のバリエーションを正しく処理するようにします。現在、/area/marumouchiと/area/marunouchi/の両方がアクセス可能であり、重複コンテンツのシグナルを作成する可能性があります。

第七に、robots.txtファイルが誤って重要なリソースをブロックしていないことを確認します。現在のrobots.txtは正しいように見えますが、JavaScript、CSS、画像リソースがクロール可能であることを再確認します。

第八に、まだ行っていない場合はGoogle Search Consoleにサイトマップを直接送信します。インデックスカバレッジレポートを監視して、Googleが実際にインデックス化しているページ数と発見しているページ数を確認します。現在のカバレッジデータは、Googleがサイトマップに含まれるページよりもはるかに少ないページをインデックス化していることを示唆しています。

最後に、初期のバックリンクと権威を構築するためのコンテンツマーケティング戦略を検討します。東京の飲食に関するブログ投稿を書き、地域ガイドを作成し、リソースにリンクする可能性のある旅行や食のブロガーに連絡します。品質と関連性の外部シグナルがなければ、完璧な技術的SEOでも不十分な可能性があります。

## 即座に取るべきステップ

最も緊急のアクションは、構造化データのlocalhostバグの修正です。過去のrobots.txtブロック事故により、Googleはすでにサイトの管理品質に疑問を持っている可能性があります。その状態でlocalhost URLが発見されると、サイトの信頼性評価がさらに低下します。これはURL構築ロジックを置き換える1行のコード変更であり、即座にデプロイすべきです。

第二の優先事項は、トップページとエリアページへの説明文の追加です。Googleがインデックス登録を検討する際、ページの目的と価値を理解する必要があります。エリアオブジェクトにすでに存在する説明コンテンツを活用し、適切なテンプレートを作成することで、比較的迅速に達成できます。

第三の優先事項は、詳細ページへのレストラン構造化データの実装です。これにはより実質的な開発が必要ですが、ローカル検索での表示に不可欠です。

これら3つのアクションを完了した後、Google Search Consoleで主要なページのインデックス登録を再度リクエストすることを強く推奨します。技術的問題を修正した上でリクエストすることで、Googleがサイトを再評価し、インデックスに復帰させる可能性が高まります。

これら3つのアクションは最も重要な技術的欠陥に対処するものであり、コンテンツ拡張やリンク構築キャンペーンに多額の投資を行う前に完了すべきです。修正完了後は、定期的にSearch Consoleを確認し、インデックス状況の変化を監視することが重要です。

## 結論

Hyperlocal Tokyoは、適切なサーバーサイドレンダリング、hreflang実装、サイトマップ構造を備えた堅実な技術的基盤を持っています。2024年11月までは実際にGoogle検索結果に表示されており、トラフィックが発生していたことから、サイトの基本的な価値とコンセプトは実証されています。

現在のインデックス未登録状況は、robots.txtブロック事故による過去のマイナス評価と、今回発見された技術的問題の組み合わせに起因している可能性が高いです。特に構造化データのlocalhostバグは、過去の事故と合わせて、Googleがサイトの管理品質と信頼性を深刻に疑う原因となっています。

幸いなことに、発見された技術的問題はすべて修正可能であり、特にlocalhost URLの修正は1行のコード変更で完了します。これらの修正を完了し、Google Search Consoleで再度インデックス登録をリクエストすることで、Googleがサイトを再評価し、インデックスに復帰させる可能性は十分にあります。

技術的欠陥への対処とコンテンツの深さの強化が当面の優先事項です。これらを完了した後、定期的にSearch Consoleを監視し、必要に応じて追加の最適化を行うことで、以前のような検索トラフィックの回復と、さらなる成長を目指すべきです。
